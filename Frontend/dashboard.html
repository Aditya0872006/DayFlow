<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dayflow - Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />

    <style>
      :root {
        --primary-purple: #c065e8;
        --primary-purple-hover: #a54bc9;
        --bg-light: #f8f9fa;
      }

      body {
        background-color: #f0f2f5;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        padding-bottom: 50px;
      }

      /* --- NAVBAR --- */
      .navbar {
        background-color: white;
        border-bottom: 1px solid #dee2e6;
        padding: 0.8rem 1.5rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .navbar-brand {
        font-family: cursive;
        font-weight: 700;
        font-size: 1.5rem;
        color: #333;
      }

      .nav-link {
        color: #666;
        font-weight: 500;
        margin-right: 15px;
      }

      .nav-link.active {
        color: var(--primary-purple);
        font-weight: 700;
        border-bottom: 2px solid var(--primary-purple);
      }

      /* --- ATTENDANCE DOT --- */
      .attendance-wrapper {
        position: relative;
        margin-left: 15px;
        padding-left: 15px;
        border-left: 1px solid #dee2e6;
        display: flex;
        align-items: center;
      }

      .status-dot-btn {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background-color: #dc3545;
        border: 2px solid #fff;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .status-dot-btn.checked-in {
        background-color: #198754;
        box-shadow: 0 0 8px rgba(25, 135, 84, 0.6);
      }

      .attendance-popover-content {
        text-align: center;
        padding: 5px;
        min-width: 150px;
      }

      .btn-check-action {
        width: 100%;
        border: 1px solid #dee2e6;
        background: #fff;
        color: #333;
        font-weight: 600;
        padding: 6px 12px;
        font-size: 0.9rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .btn-check-action:hover {
        background: #f8f9fa;
      }

      /* --- TOOLBAR --- */
      .toolbar-container {
        background: white;
        padding: 15px;
        border-radius: 8px 8px 0 0;
        border: 1px solid #dee2e6;
        border-bottom: none;
        margin-top: 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
      }

      .search-wrapper {
        max-width: 300px;
        width: 100%;
      }

      .btn-new {
        background-color: var(--primary-purple);
        color: white;
        border: none;
        padding: 8px 25px;
        font-weight: 600;
        text-transform: uppercase;
      }
      .btn-new:hover {
        background-color: var(--primary-purple-hover);
        color: white;
      }
      .btn-new.hidden {
        display: none;
      }

      /* --- GRID CARDS --- */
      .grid-container {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 0 0 8px 8px;
        padding: 20px;
      }

      .emp-card {
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        position: relative;
        cursor: pointer;
        transition: all 0.2s;
        background: #fff;
      }

      .emp-card:hover {
        border-color: var(--primary-purple);
        transform: translateY(-2px);
      }

      .status-icon {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 1.1rem;
        z-index: 10;
      }

      .avatar {
        width: 80px;
        height: 80px;
        background-color: #eee;
        border-radius: 5px;
        object-fit: cover;
        margin-bottom: 10px;
      }

      .emp-name {
        font-weight: 700;
        font-size: 1rem;
        margin-bottom: 0;
        color: #333;
      }
      .emp-id {
        font-size: 0.8rem;
        color: #888;
      }

      /* --- EDITABLE PROFILE STYLES --- */
      .profile-header-input {
        border: none;
        border-bottom: 1px solid #ccc; /* Solid line for clear visibility */
        border-radius: 0;
        padding: 2px 0;
        background: transparent;
        width: 100%;
        margin-bottom: 5px;
        font-size: 0.95rem;
        color: #333;
        transition: border-color 0.3s;
      }
      .profile-header-input:focus {
        outline: none;
        border-bottom: 2px solid var(--primary-purple);
        background-color: #fcfcfc;
      }
      .profile-label {
        font-size: 0.85rem;
        color: #666;
        margin-bottom: 0;
        font-weight: 500;
      }

      .resume-section-box {
        border: 1px solid #333;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
        position: relative;
        background-color: #fff;
      }

      .resume-section-title {
        font-weight: bold;
        font-family: cursive, sans-serif;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .resume-textarea {
        width: 100%;
        border: 1px solid transparent;
        resize: vertical;
        font-size: 0.9rem;
        color: #555;
        font-style: italic;
        background-color: #f9f9f9;
        padding: 8px;
        border-radius: 4px;
      }
      .resume-textarea:hover {
        border-color: #e0e0e0;
      }
      .resume-textarea:focus {
        outline: none;
        border-color: var(--primary-purple);
        background-color: #fff;
        box-shadow: 0 0 5px rgba(192, 101, 232, 0.2);
      }

      .skill-tag,
      .cert-tag {
        display: inline-block;
        background: #e9ecef;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.8rem;
        margin-right: 5px;
        margin-bottom: 5px;
        border: 1px solid #ccc;
      }
      .cert-tag {
        background: #e3f2fd;
        border-color: #90caf9;
      }

      .salary-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px dashed #ccc;
      }
      .salary-val {
        font-weight: 600;
        text-decoration: underline;
      }

      /* Profile Pic Hover Effect */
      .profile-pic-container {
        position: relative;
        display: inline-block;
        cursor: pointer;
      }
      .profile-pic-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        opacity: 0;
        transition: opacity 0.2s;
      }
      .profile-pic-container:hover .profile-pic-overlay {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg sticky-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <i class="bi bi-ui-checks-grid me-2 text-purple"></i>Dayflow
        </a>

        <div class="d-flex align-items-center order-lg-last ms-auto ms-lg-0">
          <div class="dropdown">
            <a
              href="#"
              class="d-flex align-items-center text-decoration-none dropdown-toggle text-dark"
              data-bs-toggle="dropdown"
            >
              <img
                src="https://ui-avatars.com/api/?name=User&background=c065e8&color=fff"
                class="rounded-circle border"
                width="40"
                height="40"
                alt="Avatar"
              />
              <span class="d-none d-lg-inline fw-semibold ms-2"
                >My Profile</span
              >
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow">
              <li>
                <a class="dropdown-item" href="#" onclick="openMyProfile()"
                  >View Profile</a
                >
              </li>
              <li>
                <a class="dropdown-item text-danger" href="login.html"
                  >Log Out</a
                >
              </li>
            </ul>
          </div>

          <div class="attendance-wrapper">
            <div
              id="attendanceDot"
              class="status-dot-btn"
              data-bs-toggle="popover"
              data-bs-placement="bottom"
              data-bs-trigger="click"
              data-bs-html="true"
              title="Attendance"
            ></div>
          </div>

          <button
            class="navbar-toggler ms-3"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navContent"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>

        <div class="collapse navbar-collapse order-lg-2" id="navContent">
          <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" href="#">Employees</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Attendance</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="#">Time Off</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="toolbar-container">
        <button class="btn btn-new shadow-sm" id="btnNewEmployee">NEW</button>
        <div class="search-wrapper">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="Search..." />
            <button class="btn btn-outline-secondary">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="grid-container">
        <div class="row g-4">
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="emp-card">
              <i
                class="bi bi-circle-fill status-icon text-success"
                data-bs-toggle="tooltip"
                title="Present"
              ></i>
              <img
                src="https://randomuser.me/api/portraits/women/44.jpg"
                class="avatar"
              />
              <h5 class="emp-name">Alice Johnson</h5>
              <div class="emp-id">[Senior Dev]</div>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="emp-card">
              <i
                class="bi bi-airplane-fill status-icon text-info"
                data-bs-toggle="tooltip"
                title="On Leave"
              ></i>
              <img
                src="https://randomuser.me/api/portraits/men/32.jpg"
                class="avatar"
              />
              <h5 class="emp-name">Bob Smith</h5>
              <div class="emp-id">[Manager]</div>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="emp-card">
              <i
                class="bi bi-circle-fill status-icon text-warning"
                data-bs-toggle="tooltip"
                title="Absent"
              ></i>
              <img
                src="https://randomuser.me/api/portraits/men/15.jpg"
                class="avatar"
              />
              <h5 class="emp-name">Charlie Davis</h5>
              <div class="emp-id">[Intern]</div>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="emp-card">
              <i
                class="bi bi-circle-fill status-icon text-success"
                data-bs-toggle="tooltip"
                title="Present"
              ></i>
              <img
                src="https://randomuser.me/api/portraits/women/65.jpg"
                class="avatar"
              />
              <h5 class="emp-name">Diana Prince</h5>
              <div class="emp-id">[Designer]</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="myProfileModal" tabindex="-1">
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header border-0 pb-0">
            <h5 class="modal-title" style="font-family: cursive">
              Edit Profile
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body pt-0">
            <div class="row mb-4 mt-3 border-bottom pb-4">
              <div class="col-md-5 d-flex gap-4 align-items-center">
                <div
                  class="profile-pic-container"
                  onclick="triggerProfileUpload()"
                >
                  <img
                    id="profileImageDisplay"
                    src="https://ui-avatars.com/api/?name=Admin+User&background=c065e8&color=fff&size=150"
                    class="rounded-circle shadow-sm"
                    width="120"
                    height="120"
                    style="object-fit: cover; border: 3px solid white"
                  />
                  <div class="profile-pic-overlay">
                    <i class="bi bi-camera-fill fs-3"></i>
                  </div>
                  <input
                    type="file"
                    id="profileUploadInput"
                    hidden
                    accept="image/*"
                    onchange="previewProfileImage(this)"
                  />
                </div>

                <div class="flex-grow-1">
                  <div class="mb-2">
                    <input
                      type="text"
                      class="form-control form-control-lg fw-bold border-0 px-0"
                      value="My Name"
                      style="font-family: cursive"
                    />
                  </div>
                  <div class="mb-1">
                    <label class="profile-label">Login ID</label>
                    <input
                      type="text"
                      class="profile-header-input"
                      value="admin_user"
                    />
                  </div>
                  <div class="mb-1">
                    <label class="profile-label">Email</label>
                    <input
                      type="text"
                      class="profile-header-input"
                      value="admin@company.com"
                    />
                  </div>
                  <div class="mb-1">
                    <label class="profile-label">Mobile</label>
                    <input
                      type="text"
                      class="profile-header-input"
                      value="+1 987 654 3210"
                    />
                  </div>
                </div>
              </div>
              <div class="col-md-1"></div>
              <div class="col-md-6">
                <div class="mb-2">
                  <label class="profile-label">Company</label>
                  <input
                    type="text"
                    class="profile-header-input"
                    value="Tech Solutions Inc."
                  />
                </div>
                <div class="mb-2">
                  <label class="profile-label">Department</label>
                  <input
                    type="text"
                    class="profile-header-input"
                    value="Human Resources"
                  />
                </div>
                <div class="mb-2">
                  <label class="profile-label">Manager</label>
                  <input
                    type="text"
                    class="profile-header-input"
                    value="Sarah Connor"
                  />
                </div>
                <div class="mb-2">
                  <label class="profile-label">Location</label>
                  <input
                    type="text"
                    class="profile-header-input"
                    value="New York, USA"
                  />
                </div>
              </div>
            </div>

            <ul
              class="nav nav-tabs mb-3 border-dark"
              id="profileTabs"
              role="tablist"
            >
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active text-dark fw-bold"
                  style="border-color: #333; border-bottom-color: white"
                  id="resume-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#resume-pane"
                  type="button"
                  role="tab"
                >
                  Resume
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link text-dark"
                  id="private-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#private-pane"
                  type="button"
                  role="tab"
                >
                  Private Info
                </button>
              </li>
              <li class="nav-item" role="presentation" id="salaryTabLi">
                <button
                  class="nav-link text-dark"
                  id="salary-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#salary-pane"
                  type="button"
                  role="tab"
                >
                  Salary Info
                </button>
              </li>
            </ul>

            <div class="tab-content" id="profileTabsContent">
              <div
                class="tab-pane fade show active"
                id="resume-pane"
                role="tabpanel"
              >
                <div class="row">
                  <div class="col-md-7">
                    <div class="resume-section-box">
                      <div class="resume-section-title">
                        About
                        <i
                          class="bi bi-pencil-square text-muted"
                          style="cursor: pointer"
                        ></i>
                      </div>
                      <textarea class="resume-textarea" rows="4">
Lorem Ipsum is simply dummy text...</textarea
                      >
                    </div>
                    <div class="resume-section-box">
                      <div class="resume-section-title">
                        What I love about my job
                        <i class="bi bi-pencil-square text-muted"></i>
                      </div>
                      <textarea class="resume-textarea" rows="3">
Solving problems...</textarea
                      >
                    </div>
                    <div class="resume-section-box">
                      <div class="resume-section-title">
                        My interests
                        <i class="bi bi-pencil-square text-muted"></i>
                      </div>
                      <textarea class="resume-textarea" rows="3">
Reading, Coding...</textarea
                      >
                    </div>
                  </div>
                  <div class="col-md-5">
                    <div class="resume-section-box" style="min-height: 200px">
                      <div class="resume-section-title">Skills</div>
                      <div id="skillsContainer" class="mb-3">
                        <span class="skill-tag">Management</span>
                      </div>
                      <div class="input-group input-group-sm">
                        <input
                          type="text"
                          class="form-control"
                          id="newSkillInput"
                          placeholder="New Skill"
                        />
                        <button
                          class="btn btn-outline-secondary"
                          type="button"
                          onclick="addSkill()"
                        >
                          + Add
                        </button>
                      </div>
                    </div>
                    <div class="resume-section-box" style="min-height: 200px">
                      <div class="resume-section-title">Certification</div>
                      <div id="certContainer" class="mb-3">
                        <span class="cert-tag">SHRM-CP</span>
                      </div>
                      <div class="input-group input-group-sm">
                        <input
                          type="text"
                          class="form-control"
                          id="newCertInput"
                          placeholder="New Certificate"
                        />
                        <button
                          class="btn btn-outline-secondary"
                          type="button"
                          onclick="addCert()"
                        >
                          + Add
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="tab-pane fade" id="private-pane" role="tabpanel">
                <div class="row mt-3">
                  <div class="col-md-6 border-end pe-4">
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label"
                        >Date of Birth</label
                      >
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="DD/MM/YYYY"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label"
                        >Residing Address</label
                      >
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="Full Address"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label">Nationality</label>
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="Nationality"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label"
                        >Personal Email</label
                      >
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="email@example.com"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label">Gender</label>
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="Male/Female"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label"
                        >Marital Status</label
                      >
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="Single/Married"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label"
                        >Date of Joining</label
                      >
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="DD/MM/YYYY"
                        />
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6 ps-4">
                    <h6
                      class="fw-bold mb-3 fst-italic"
                      style="font-family: cursive"
                    >
                      Bank Details
                    </h6>

                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label"
                        >Account Number</label
                      >
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="Account No"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label">Bank Name</label>
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="Bank Name"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label">IFSC Code</label>
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="IFSC Code"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label">PAN No</label>
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="PAN Number"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label">UAN NO</label>
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          placeholder="UAN Number"
                        />
                      </div>
                    </div>
                    <div class="mb-2 row align-items-center">
                      <label class="col-sm-4 profile-label">Emp Code</label>
                      <div class="col-sm-8">
                        <input
                          type="text"
                          class="profile-header-input"
                          value="EMP-001"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="tab-pane fade" id="salary-pane" role="tabpanel">
                <div class="text-center mb-4">
                  <h5
                    class="border d-inline-block px-4 py-2"
                    style="font-family: cursive"
                  >
                    Salary Info
                  </h5>
                </div>
                <div class="row mb-4">
                  <div class="col-md-5">
                    <div class="d-flex align-items-center mb-2">
                      <span class="me-2 fw-bold" style="width: 100px"
                        >Month Wage</span
                      >
                      <input
                        type="number"
                        id="inputMonthWage"
                        class="form-control form-control-sm me-2 text-center fw-bold"
                        value="50000"
                        style="width: 120px"
                        oninput="calculateSalary()"
                      />
                      <span>/ Month</span>
                    </div>
                    <div class="d-flex align-items-center">
                      <span class="me-2 fw-bold" style="width: 100px"
                        >Yearly wage</span
                      >
                      <input
                        type="text"
                        id="inputYearlyWage"
                        class="form-control form-control-sm me-2 text-center fw-bold"
                        value="600000"
                        style="width: 120px"
                        readonly
                      />
                      <span>/ Yearly</span>
                    </div>
                  </div>
                  <div class="col-md-7">
                    <div class="row align-items-center mb-2">
                      <div class="col-6 text-end">
                        No of working days in a week:
                      </div>
                      <div class="col-6">
                        <input
                          type="text"
                          class="form-control form-control-sm border-bottom border-0 rounded-0"
                          value="5"
                        />
                      </div>
                    </div>
                    <div class="row align-items-center">
                      <div class="col-6 text-end">Break Time:</div>
                      <div class="col-6 d-flex align-items-center">
                        <input
                          type="text"
                          class="form-control form-control-sm border-bottom border-0 rounded-0"
                          value="1"
                        />
                        <span class="fs-4 ms-2" style="font-family: cursive"
                          >/hrs</span
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <hr />

                <div class="row">
                  <div class="col-md-6 border-end pe-4">
                    <h6 class="fst-italic mb-3">Salary Components</h6>

                    <div class="mb-3">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>Basic Salary</small>
                        <span class="salary-val" id="valBasic">25000.00</span>
                        <small class="text-muted">50.00%</small>
                      </div>
                      <div style="font-size: 0.7rem; color: #888">
                        50% of Monthly Wage
                      </div>
                    </div>

                    <div class="mb-3">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>House Rent Allowance</small>
                        <span class="salary-val" id="valHRA">12500.00</span>
                        <small class="text-muted">50.00%</small>
                      </div>
                      <div style="font-size: 0.7rem; color: #888">
                        50% of Basic Salary
                      </div>
                    </div>

                    <div class="mb-3">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>Standard Allowance</small>
                        <span class="salary-val" id="valStdAllow">4167.00</span>
                        <small class="text-muted">Fixed</small>
                      </div>
                    </div>

                    <div class="mb-3">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>Performance Bonus</small>
                        <span class="salary-val" id="valBonus">2082.50</span>
                        <small class="text-muted">8.33%</small>
                      </div>
                    </div>

                    <div class="mb-3">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>Leave Travel Allowance</small>
                        <span class="salary-val" id="valLTA">2082.50</span>
                        <small class="text-muted">8.33%</small>
                      </div>
                    </div>

                    <div class="mb-3 p-2 bg-light border rounded">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small class="fw-bold"
                          >Fixed Allowance (Balancing)</small
                        >
                        <span class="salary-val text-primary" id="valFixedAllow"
                          >4168.00</span
                        >
                        <small class="text-muted">Rem.</small>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6 ps-4">
                    <h6 class="fst-italic mb-3">
                      Provident Fund (PF) Contribution
                    </h6>

                    <div class="mb-3">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>Employee</small>
                        <span class="salary-val" id="valPFEmployee"
                          >3000.00</span
                        >
                        <small class="text-muted">12.00%</small>
                      </div>
                    </div>

                    <div class="mb-4">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>Employer</small>
                        <span class="salary-val" id="valPFEmployer"
                          >3000.00</span
                        >
                        <small class="text-muted">12.00%</small>
                      </div>
                    </div>

                    <h6 class="fst-italic mb-3">Tax Deductions</h6>
                    <div class="mb-3">
                      <div
                        class="d-flex justify-content-between align-items-end"
                      >
                        <small>Professional Tax</small>
                        <span class="salary-val" id="valProfTax">200.00</span>
                        <small>/ month</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer bg-light">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="saveProfileChanges()"
            >
              Save Changes
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // --- 1. ROLE LOGIC ---
      const currentUserRole = localStorage.getItem("userRole") || "admin";

      document.addEventListener("DOMContentLoaded", function () {
        const newBtn = document.getElementById("btnNewEmployee");
        if (currentUserRole === "employee") {
          if (newBtn) newBtn.classList.add("hidden");
        } else {
          if (newBtn) newBtn.classList.remove("hidden");
        }
        calculateSalary();
      });

      // --- 2. SALARY LOGIC ---
      function calculateSalary() {
        let wageInput = document.getElementById("inputMonthWage");
        let wage = parseFloat(wageInput.value) || 0;
        document.getElementById("inputYearlyWage").value = (wage * 12).toFixed(
          0
        );

        let basic = wage * 0.5;
        let hra = basic * 0.5;
        let stdAllow = 4167.0;
        let bonus = basic * 0.0833;
        let lta = basic * 0.0833;

        let usedAmount = basic + hra + stdAllow + bonus + lta;
        let fixedAllow = wage - usedAmount;
        if (fixedAllow < 0) fixedAllow = 0;

        let pf = basic * 0.12;
        let profTax = 200.0;

        document.getElementById("valBasic").innerText = basic.toFixed(2);
        document.getElementById("valHRA").innerText = hra.toFixed(2);
        document.getElementById("valStdAllow").innerText = stdAllow.toFixed(2);
        document.getElementById("valBonus").innerText = bonus.toFixed(2);
        document.getElementById("valLTA").innerText = lta.toFixed(2);
        document.getElementById("valFixedAllow").innerText =
          fixedAllow.toFixed(2);
        document.getElementById("valPFEmployee").innerText = pf.toFixed(2);
        document.getElementById("valPFEmployer").innerText = pf.toFixed(2);
        document.getElementById("valProfTax").innerText = profTax.toFixed(2);
      }

      // --- 3. PROFILE LOGIC ---
      const profileModal = new bootstrap.Modal(
        document.getElementById("myProfileModal")
      );

      function openMyProfile() {
        const salaryTab = document.getElementById("salaryTabLi");
        if (currentUserRole === "admin") {
          salaryTab.classList.remove("d-none");
        } else {
          salaryTab.classList.add("d-none");
          const resumeTabBtn = new bootstrap.Tab(
            document.getElementById("resume-tab")
          );
          resumeTabBtn.show();
        }
        profileModal.show();
      }

      function triggerProfileUpload() {
        document.getElementById("profileUploadInput").click();
      }

      function previewProfileImage(input) {
        if (input.files && input.files[0]) {
          var reader = new FileReader();
          reader.onload = function (e) {
            document.getElementById("profileImageDisplay").src =
              e.target.result;
          };
          reader.readAsDataURL(input.files[0]);
        }
      }

      function addSkill() {
        const input = document.getElementById("newSkillInput");
        const container = document.getElementById("skillsContainer");
        const val = input.value.trim();
        if (val) {
          const span = document.createElement("span");
          span.className = "skill-tag";
          span.innerText = val;
          container.appendChild(span);
          input.value = "";
        }
      }

      function addCert() {
        const input = document.getElementById("newCertInput");
        const container = document.getElementById("certContainer");
        const val = input.value.trim();
        if (val) {
          const span = document.createElement("span");
          span.className = "cert-tag";
          span.innerText = val;
          container.appendChild(span);
          input.value = "";
        }
      }

      function saveProfileChanges() {
        alert("âœ… Profile details updated successfully!");
        const modalEl = document.getElementById("myProfileModal");
        const modal = bootstrap.Modal.getInstance(modalEl);
        modal.hide();
      }

      // --- 4. ATTENDANCE & TOOLTIPS ---
      var tooltipTriggerList = [].slice.call(
        document.querySelectorAll('[data-bs-toggle="tooltip"]')
      );
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });

      let isCheckedIn = false;
      let checkInTime = "";
      const dotElement = document.getElementById("attendanceDot");
      let popoverInstance = null;

      function initPopover() {
        if (popoverInstance) popoverInstance.dispose();
        popoverInstance = new bootstrap.Popover(dotElement, {
          content: getPopoverContent,
          html: true,
          sanitize: false,
          container: "body",
        });
      }

      function getPopoverContent() {
        if (!isCheckedIn) {
          return `<div class="attendance-popover-content">
                        <button class="btn btn-check-action" onclick="performCheckIn()">
                            Check IN <i class="bi bi-arrow-right ms-2"></i>
                        </button>
                    </div>`;
        } else {
          return `<div class="attendance-popover-content">
                        <div class="time-display">Since ${checkInTime}</div>
                        <button class="btn btn-check-action text-danger" onclick="performCheckOut()">
                            Check Out <i class="bi bi-box-arrow-right ms-2"></i>
                        </button>
                    </div>`;
        }
      }

      window.performCheckIn = function () {
        isCheckedIn = true;
        const now = new Date();
        checkInTime = now.toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });
        dotElement.classList.add("checked-in");
        popoverInstance.hide();
        setTimeout(() => alert("âœ… Checked IN at " + checkInTime), 100);
      };

      window.performCheckOut = function () {
        isCheckedIn = false;
        dotElement.classList.remove("checked-in");
        popoverInstance.hide();
        setTimeout(() => alert("ðŸ‘‹ Checked OUT."), 100);
      };

      document.body.addEventListener("click", function (e) {
        if (!dotElement.contains(e.target) && !e.target.closest(".popover")) {
          if (popoverInstance) popoverInstance.hide();
        }
      });

      initPopover();
    </script>
  </body>
</html>
